{% load static%}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>supervisor</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.0.0/mdb.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
      integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="{% static 'css/supervisor.css'%}" />
  </head>
  <body>
    <div class="continer-fluid">
      <div class="wrapper">
        <nav id="sidebar">
          <div class="sidebar-header">
            <h5>Dashboard</h5>
          </div>

          <ul class="list-unstyled components">
            <img
              id="profile-pic"
              src="..{{supervisor.photo_url.url}}"
              alt=""
              style="width: 45px; height: 45px"
              class="rounded-circle m-3"
            />
            <li>
              <a href="{%url 'supervisor_profile'%}">
                <i class="fa-solid fa-user"></i>
                &nbsp;&nbsp; Profile
              </a>
            </li>
            <li>
              <a href="{%url 'logout'%}">
                <i class="fa-solid fa-right-from-bracket"></i>
                &nbsp;&nbsp; Logout
              </a>
            </li>
          </ul>
        </nav>
        <div id="content" class="m-3">
          <nav class="navbar navbar-light bg-light">
            <div class="container-fluid">
              <button
                type="button"
                id="sidebarCollapse"
                class="btn badge-success"
                title="Collapse"
              >
                <span>
                  <i class="fas fa-align-justify"></i>
                </span>
              </button>
              <div class="dropdown">
                <button
                  class="btn btn-secondary dropdown-toggle"
                  type="button"
                  id="dropdownMenuButton"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                ></button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <button class="dropdown-item" onClick="{logOut}">
                    <i class="fa fa-sign-out" aria-hidden="true"></i>
                    &nbsp;&nbsp; Logout
                  </button>
                </div>
              </div>
            </div>
          </nav>
          <h2>Submissions</h2>
          <table class="table align-middle mb-0 bg-white w-auto">
            <thead class="bg-light">
              <tr>
                <th>Student Admission</th>
                <th>Student Name</th>
                <th>Department</th>
                <th>Logbook</th>
              </tr>
            </thead>
            <tbody>
              {%for student in students %} {%if student.student.photo_url %}
              <div
                class="modal fade"
                id="exampleModal{{student.id}}"
                tabindex="-1"
                role="dialog"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="text-center"> Employer's Feedback:</h5>
                      <button
                        type="button"
                        class="badge badge-warning"
                        data-dismiss="modal"
                        aria-label="Close"
                      >
                     
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      {%if student.student.employercomment.comment %}
                      <p>{{student.student.employercomment.comment}}</p>
                      {% else %}
                      <p>No comments yet</p>
                      {%endif%}
                    </div>
                  </div>
                </div>
              </div>
              <tr key="index">
                <td>
                  <div class="d-flex align-items-center">
                    <img
                      src="..{{student.student.photo_url.url}}"
                      alt=""
                      style="width: 45px; height: 45px"
                      class="rounded-circle"
                    />
                    <div class="ms-3">
                      <p class="fw-bold mb-1"></p>
                      <p class="text-muted mb-0">
                        {{student.student.admission_no}}
                      </p>
                      <div class="dropdown">
                        <span
                          class="bg-light dropdown-toggle"
                          id="dropdownMenuButton"
                          data-toggle="dropdown"
                          aria-haspopup="true"
                          aria-expanded="false"
                        ></span>
                        <div
                          class="dropdown-menu"
                          aria-labelledby="dropdownMenuButton"
                        >
                          <button
                            class="dropdown-item"
                            data-toggle="modal"
                            data-target="#exampleModal{{student.id}}"
                            style="cursor: pointer;"
                          >
                            <em>Comment</em>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </td>
                <td>{{student.student.name}}</td>
                <td>
                  <div class="d-flex align-items-center">
                    <p class="fw-normal mb-1">
                      {{student.student.attachment.department_name}}
                    </p>
                  </div>
                </td>
                <td>
                  <a
                    href="{% url 'supervisor_feedback' student.student.user.email%}"
                    class="badge badge-success rounded-pill d-inline"
                  >
                    view
                  </a>
                </td>
              </tr>
              {% endif %} {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      <button id="back-to-top" class="btn">
        Back Top &nbsp;
        <i class="fa fa-arrow-circle-up" aria-hidden="true"></i>
      </button>
    </div>
    <!-- jQuery CDN - Slim version (=without AJAX) -->
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <!-- Popper.JS -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
      integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
      crossorigin="anonymous"
    ></script>
    <!-- Bootstrap JS -->
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
      integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $("#sidebarCollapse").on("click", function () {
          $("#sidebar").toggleClass("active");
        });

        $("#addFeedback").on("click", () => {
          $("#feedback").css("display", "block");
          $("#addFeedback").css("display", "none");
          $(document).scrollTop($(document).height());
        });

        $("#feedback").on("submit", (e) => {
          e.preventDefault();
          $("#addFeedback").css("display", "block");
          $("#feedback").css("display", "none");
        });

        let backToTopButton = "";
        window.addEventListener("scroll", () => {
          if (window.scrollY > 100) {
            $("#back-to-top").show("slow");
          } else {
            $("#back-to-top").hide();
          }
        });
        const scrollup = () => {
          window.scrollTo({
            top: 0,
            behavior: "smooth",
          });
        };
        $("#back-to-top").on("click", () => {
          scrollup();
        });
        $("#myModal").on("shown.bs.modal", function () {
          $("#myInput").trigger("focus");
        });
      });
    </script>
  </body>
</html>
